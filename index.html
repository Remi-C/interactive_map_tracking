<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Interactive map tracking by Remi-C</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Interactive map tracking</h1>
        <h2>A QGIS 2.6 plugin to track camera of user , AND/OR to autocommit/refresh edit on PostGIS vector layer</h2>
        <a href="https://github.com/Remi-C/interactive_map_tracking" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <p>This plug-in was designed to </p>

<ul>
<li>allow <strong>concurrent editing awareness or history of editing</strong> (tracking)</li>
<li>enable QGIS to play well with PostGIS database that use trigger to <strong>reconstruct geometry on the fly</strong>
</li>
</ul>

<h3>
<a id="feature" class="anchor" href="#feature" aria-hidden="true"><span class="octicon octicon-link"></span></a>feature</h3>

<p>This plug-in adds 2 features to QGIS, the user choose what feature he uses</p>

<h4>
<a id="tracking-the-position" class="anchor" href="#tracking-the-position" aria-hidden="true"><span class="octicon octicon-link"></span></a>tracking the position</h4>

<ul>
<li>each time the user change its position on QGIS map canvas (aka camera position), the screen rectangle is saved along with a user id and a timestamp. That is, if the user zoom level is sufficient (it is a parameter)</li>
<li>with correct QGIS styling, this enable to see : 

<ul>
<li>where the other users <strong>are editing</strong> so two people won't hopefully edit the same area</li>
<li>where the other users (and self) <strong>were editing</strong>, so an user won't come and edit the same area twice</li>
</ul>
</li>
<li>Moreover, this tracking data can be analysed to produce : 

<ul>
<li>a map of editing time (gives the place where editing was short/long)</li>
<li>Reliable stats on editing time and area edited per user, which is essential in a benchmark</li>
</ul>
</li>
</ul>

<h4>
<a id="autosave-and-refresh-after-an-edit" class="anchor" href="#autosave-and-refresh-after-an-edit" aria-hidden="true"><span class="octicon octicon-link"></span></a>autosave and refresh after an edit</h4>

<ul>
<li>QGIS uses a sophisticated Do/Undo mechanism with a delayed writing system. However, when working with a data base that generates geometry on the fly (trigger), it is essential to commit each change immediately.</li>
<li>The plug-in does exactly that : each modification (geometry or attribute) is saved immediately to the layer, and the canvas is re-rendered.</li>
<li>this instantaneous commit allow to <strong>create new user interaction</strong> that are within the database, as opposed to be within QGIS. Thus, this interactions can be used in other GIS software, and can be much more complex.</li>
</ul>

<h2>
<a id="configure-the-plug-in" class="anchor" href="#configure-the-plug-in" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configure the plug-in</h2>

<p>There are very little parameters to this plugin.</p>

<p><strong>By default the plug-in does nothing</strong> ! </p>

<p>Notice that for the tracking you have to select a compatible layer to write the tracking information.
The layer can be any qgis vector layer type,<br>
but it must has <strong>at least</strong> (other attributes will be filed with null) :   </p>

<ul>
<li>A column <code>user_id</code> of type text</li>
<li>A column <code>w_time</code> of type text (but following the iso format for time, for usage)</li>
</ul>

<p>To control the plugin, click on the plug-in icon that has been added to QGIS icons when installing the plug-in.
[[/images/plugin/logo_LQ.png]]</p>

<p>Then configure the parameters : 
[[/images/plugin/GUI_of_plugin_explained.png]]</p>

<p>As a regular user, you shouldn't use the last tab (dev).</p>

<h2>
<a id="using-the-plug-in" class="anchor" href="#using-the-plug-in" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the plug-in</h2>

<h3>
<a id="tracking" class="anchor" href="#tracking" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tracking</h3>

<p>When the tracking is activated, the position of the screen will be saved automatically every time you change you screen position in QGIS, if you are close enough (depending on the parameter).
Each screen geometry saved also has a user-id given by your computer, as well as a time of saving.</p>

<p>[[/images/plugin/principle_of_tracking.png]]</p>

<p>Both of this attributes can be used to display who did what and when within QGIS, or even create a map of editing time</p>

<h3>
<a id="coloring-camera-tracking-layer" class="anchor" href="#coloring-camera-tracking-layer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Coloring camera tracking layer</h3>

<h4>
<a id="coloring-camera-tracking-with-time" class="anchor" href="#coloring-camera-tracking-with-time" aria-hidden="true"><span class="octicon octicon-link"></span></a>coloring camera tracking with time</h4>

<ul>
<li>edit style of layer</li>
<li>choose graduated</li>
<li>paste <code>todatetime("w_time")</code> in column field</li>
<li>click button class
<img src="https://github.com/Remi-C/street_gen/blob/master/gui/doc/doc_github/coloring_camera_position.png" alt="coloring camera position">
</li>
</ul>

<h4>
<a id="coloring-camera-tracking-with-user_id" class="anchor" href="#coloring-camera-tracking-with-user_id" aria-hidden="true"><span class="octicon octicon-link"></span></a>coloring camera tracking with user_id</h4>

<ul>
<li>edit style of layer</li>
<li>choose graduated or classified</li>
<li>paste <code>tostring("user_id")</code> in column field</li>
<li>click button class
<img src="https://github.com/Remi-C/street_gen/blob/master/gui/doc/doc_github/coloring_camera_position_by_user_id.png" alt="coloring camera position">
</li>
</ul>

<h3>
<a id="auto-save-and-refresh-feature" class="anchor" href="#auto-save-and-refresh-feature" aria-hidden="true"><span class="octicon octicon-link"></span></a>Auto save and refresh feature</h3>

<p>This feature can only be used on PostGIS vector layers, because it wouldn't make much sense elsewhere.</p>

<p>When activated, each edition (geometry or attribute) that you perform on a PostGIS vector layer is instantaneously saved, and QGIS display is refreshed afterward.<br>
This behaviour skip the whole Do/Undo QGIS feature, but allow to use on-the-fly generation of geometry in database.</p>

<p>[[/images/plugin/auto_save_combined.png]]</p>

<h3>
<a id="creating-an-edition-duration-map" class="anchor" href="#creating-an-edition-duration-map" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creating an edition-duration map</h3>

<p>You can create an edition-duration map, see [[Using a PostGIS layer for tracking|[User]-Advanced-Tracking-with-a-PostGIS-layer]]</p>

<h2>
<a id="using-the-plug-in--limitations" class="anchor" href="#using-the-plug-in--limitations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the plug-in : Limitations</h2>

<ul>
<li>tracking

<ul>
<li>when the tracking layer is not diplayed, no tracking</li>
<li>because the plug-in writes each camera position, it may slow navigation when using a lot of scroll/unscroll</li>
<li>In certain condition, non metric coordinates could cause weird behavior</li>
</ul>
</li>
<li>Autosave/refresh

<ul>
<li>The Do/Undo feature can't be used</li>
<li> when using the node tool, auto saving will loose the selection of nodes </li>
</ul>
</li>
</ul>

<h2>
<a id="improving-the-plug-in" class="anchor" href="#improving-the-plug-in" aria-hidden="true"><span class="octicon octicon-link"></span></a>Improving the plug-in</h2>

<p>This is an open source project, any test/idea/contribution is welcome.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/Remi-C/interactive_map_tracking/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/Remi-C/interactive_map_tracking/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/Remi-C/interactive_map_tracking"></a> is maintained by <a href="https://github.com/Remi-C">Remi-C</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-60271234-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
